<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>	
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
			<meta name="apple-mobile-web-app-capable" content="yes">
				<title>Caries: A "Disease Process"</title>
					 <link rel="stylesheet" href="../theme/default/style.css" type="text/css">
					<link rel="stylesheet" href="Styles/isotopestyle.css" type="text/css">
						<style type="text/css">
						
        #controlToggle li {
            list-style: none;
        }
        p {
            width: 512px;
        }
        #options {
            position: relative;
            width: 512px;
        }
        #output {
            float: right;
        }

        /* avoid pink tiles */
        .olImageLoadError {
            background-color: transparent !important;
        }
    </style>
						
					
 <script type="text/javascript" src="http://openlayers.org/dev/OpenLayers.js"></script>
	
		<script type="text/javascript">     
			
//=========DEFINE GLOBAL VARIABLES==============		
		var lon = -90.0;
		var lat = 16.7;
		var zoom = 5;
		
		var map, map_2, measureControls; 
		var Layers = new Object ();
		
//==========INITIALIZATION FUNCTION==============		
		function init(){
			var options = {theme: null};
			map = new OpenLayers.Map('map', options);
			
			
//==========CREATE LAYERS FIRST MAP==============		
			bmngLayer = new OpenLayers.Layer.WMS(							
				"Blue Marble Base Map",
				"http://edacwms.unm.edu/cgi-bin/mapfiles/edacimagery?",
				{layers:
				"bmng8km,bmng2km,bmng500mA1,bmng500mA2,bmng500mB1,bmng500mB2,bmng500mC1,bmng500mC2,bmng500mD1,bmng500mD2",version: '1.3.0', transparent: 'TRUE'},
				{isBaseLayer: true});
						map.addLayer(bmngLayer);
			
			base1= new OpenLayers.Layer.WMS(
				'Alternate Base Layer',
				'http://129.24.63.138:8080/geoserver/BillBrown_final_exam/wms',				
				{layers:'BillBrown_final_exam:HYP_HR_SR_OB_DR', transparent:true},
				{isBaseLayer: true});
						map.addLayer(base1);
			
			baseLayer = new OpenLayers.Layer.WMS(			
				'Open Layer Base Map',
				'http://vmap0.tiles.osgeo.org/wms/vmap0',
				{layers: 'basic'},
				{isBaseLayer: true});
						map.addLayer(baseLayer);								
				
			labels = new OpenLayers.Layer.WMS(
				'Location Labels',
				'http://vmap0.tiles.osgeo.org/wms/vmap0',
				{layers: 'clabel,ctylabel,statelabel',
				transparent: true},
				{visibility: false, opacity:0.5});
						map.addLayer(labels);
						
			
					
			//==========CREATE VECTOR EDITOR CONTROLS FIRST MAP==============
				var vector_layer = new OpenLayers.Layer.Vector(
					'Editable Vectors');
	
			//==========CREATE KML STYLE FIRST MAP==============
				kmlStyle = {fillColor: "#0000ff", fillOpacity: .2, strokeOpacity: .5, strokeColor: "#0000ff"}	
				
			//==========CREATE KML LAYERS FIRST MAP==============		
				caries = new OpenLayers.Layer.Vector("Percentage of Burials with Caries", {
					projection: map.displayProjection,
					visibility: true,				
					strategies: [new OpenLayers.Strategy.Fixed()],
					protocol: new OpenLayers.Protocol.HTTP({
					url: "kml/test/caries.kml",
					format: new OpenLayers.Format.KML({
					extractStyles: true,
					extractAttributes: true
							})
						})
					});
						map.addLayer(caries);
						
						 // style the sketch fancy
            var sketchSymbolizers = {
                "Point": {
                    pointRadius: 4,
                    graphicName: "square",
                    fillColor: "white",
                    fillOpacity: 1,
                    strokeWidth: 1,
                    strokeOpacity: 1,
                    strokeColor: "#333333"
                },
                "Line": {
                    strokeWidth: 3,
                    strokeOpacity: 1,
                    strokeColor: "#666666",
                    strokeDashstyle: "dash"
                },
                "Polygon": {
                    strokeWidth: 2,
                    strokeOpacity: 1,
                    strokeColor: "#666666",
                    fillColor: "white",
                    fillOpacity: 0.3
                }
            };
            var style = new OpenLayers.Style();
            style.addRules([
                new OpenLayers.Rule({symbolizer: sketchSymbolizers})
            ]);
            var styleMap = new OpenLayers.StyleMap({"default": style});
            
            // allow testing of specific renderers via "?renderer=Canvas", etc
            var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
            renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;

            measureControls = {
                line: new OpenLayers.Control.Measure(
                    OpenLayers.Handler.Path, {
                        persist: true,
                        handlerOptions: {
                            layerOptions: {
                                renderers: renderer,
                                styleMap: styleMap
                            }
                        }
                    }
                ),
                polygon: new OpenLayers.Control.Measure(
                    OpenLayers.Handler.Polygon, {
                        persist: true,
                        handlerOptions: {
                            layerOptions: {
                                renderers: renderer,
                                styleMap: styleMap
                            }
                        }
                    }
                )
            };
            
            var control;
            for(var key in measureControls) {
                control = measureControls[key];
                control.events.on({
                    "measure": handleMeasurements,
                    "measurepartial": handleMeasurements
                });
                map.addControl(control);
            }
            
            map.setCenter(new OpenLayers.LonLat(0, 0), 3);
            
            document.getElementById('noneToggle').checked = true;
        }
        
        function handleMeasurements(event) {
            var geometry = event.geometry;
            var units = event.units;
            var order = event.order;
            var measure = event.measure;
            var element = document.getElementById('output');
            var out = "";
            if(order == 1) {
                out += "measure: " + measure.toFixed(3) + " " + units;
            } else {
                out += "measure: " + measure.toFixed(3) + " " + units + "<sup>2</" + "sup>";
            }
            element.innerHTML = out;
        }

        function toggleControl(element) {
            for(key in measureControls) {
                var control = measureControls[key];
                if(element.value == key && element.checked) {
                    control.activate();
                } else {
                    control.deactivate();
                }
            }
        }
        
        function toggleGeodesic(element) {
            for(key in measureControls) {
                var control = measureControls[key];
                control.geodesic = element.checked;
            }
        }
        
        function toggleImmediate(element) {
            for(key in measureControls) {
                var control = measureControls[key];
                control.setImmediate(element.checked);
            }
        }
			
			//==========ADD MAP CONTROLS FIRST MAP==============		
				map.addControl(new OpenLayers.Control.EditingToolbar(vector_layer));				
				map.addControl(new OpenLayers.Control.MousePosition());			
				map.addControl(new OpenLayers.Control.LayerSwitcher({}));
				map.addControl(new OpenLayers.Control.OverviewMap());
				map.addControl(new OpenLayers.Control.PanZoomBar());
				map.addControl(new OpenLayers.Control.Scale());
				map.addControl(new OpenLayers.Control.ScaleLine());	
					
			//==========CENTER THE FIRST MAP==============
				map.setCenter(new OpenLayers.LonLat(lon, lat), zoom);
					
		
			//==========CREATE SECOND MAP==============		
				map_2 = new OpenLayers.Map('map_2', {});				
				var baseLayer2 = base1.clone();				
						map_2.addLayer(baseLayer2);		 
			
			//==========CREATE LAYER FOR MARKER FOR MOTAGUA FAULT ZONE SECOND MAP==============	
				Layers.localFeatures2 = new OpenLayers.Layer.Vector('The Study Area');
						map_2.addLayer(Layers.localFeatures2);
			
			//==========CREATE STYLE FOR MARKER FOR MOTAGUA FAULT ZONE SECOND MAP==============
				rpStyle = {pointRadius: 8, fillColor: "#CC0000", fillOpacity: .5, strokeOpacity: .5, label: "The Study Area"}
			
			//==========CREATE LOCATION FOR MARKER FOR MOTAGUA FAULT ZONE SECOND MAP==============
				var point2 = new OpenLayers.Geometry.Point (-89.8,14.91);
				
			//==========CREATE MARKER FEATURE FOR MOTAGUA FAULT ZONE SECOND MAP==============
				var feature_point2 = new OpenLayers.Feature.Vector(point2,name,rpStyle);
					feature_point2.attributes = {name: "Olmec"};
          
			//==========ADD VECTOR LAYER SECOND MAP==============		
				Layers["localFeatures2"].addFeatures([feature_point2]);
		   
			//==========ADD MAP CONTROLS SECOND MAP==============	
				map_2.addControl(new OpenLayers.Control.EditingToolbar(vector_layer));				
				map_2.addControl(new OpenLayers.Control.MousePosition());			
				map_2.addControl(new OpenLayers.Control.LayerSwitcher({}));
				map_2.addControl(new OpenLayers.Control.OverviewMap());
				map_2.addControl(new OpenLayers.Control.Scale());
				map_2.addControl(new OpenLayers.Control.ScaleLine());
			
			//==========CENTER THE SECOND MAP==============
				map_2.setCenter(new OpenLayers.LonLat(-83.0,-5.0), 3.2);
				
//==========THE CURLEY BRACKET BELOW ENDS INITIALIZATION FUNCTION==============
		}
						
	</script>			
</head>

		
	<body onload="init()">	
	
		<ul>
			<li><a href="http://billbrown2013.github.io/maya-isotopes-project-2013/isotopehome.html">Home</a></li>
			<li><a href="http://billbrown2013.github.io/maya-isotopes-project-2013/githubmayaid.html">Anemia</a></li>
			<li><a href="http://billbrown2013.github.io/maya-isotopes-project-2013/githubiso.html">Stable Isotopes</a></li>
			<li><a href="http://billbrown2013.github.io/maya-isotopes-project-2013/githubmayadiet.html">Health/Stature</a></li>
			<li><a href="http://billbrown2013.github.io/maya-isotopes-project-2013/githubthemap.html">The Map</a></li>
			<li><a href="http://billbrown2013.github.io/maya-isotopes-project-2013/githubmayamapinfo.html">References</a></li>
		</ul>
		
			<p id="introb"><b>GEOGRAPHY 591 <i>PROBLEMS</i><br> FALL 2013</b></p>
				  <div id="header"><img src="Mayaimages/maya2.png" width="150" height="200" alt="maya2"/><h1>Caries: A "Disease Process"</h1></div>	
					
					<div id="tags">
        measuring, geodesic, area, length, distance
    </div>
	
					<div id='map'></div>
						<div id='map_2'></div>
						
 <div id="options">
        <div id="output">
        </div>					
					
	 <ul id="controlToggle">
            <li>
                <input type="radio" name="type" value="none" id="noneToggle"
                       onclick="toggleControl(this);" checked="checked" />
                <label for="noneToggle">navigate</label>
            </li>
            <li>
                <input type="radio" name="type" value="line" id="lineToggle" onclick="toggleControl(this);" />
                <label for="lineToggle">measure distance</label>
            </li>
            <li>
                <input type="radio" name="type" value="polygon" id="polygonToggle" onclick="toggleControl(this);" />
                <label for="polygonToggle">measure area</label>
            </li>
            <li>
                <input type="checkbox" name="geodesic" id="geodesicToggle" onclick="toggleGeodesic(this);" />
                <label for="geodesicToggle">use geodesic measures</label>
            </li>
            <li>
                <input type="checkbox" name="immediate" id="immediateToggle" onclick="toggleImmediate(this);" />
                <label for="immediateToggle">use immediate measures</label>
            </li>
        </ul>
							
							<p id="intro"><i>DIET</i><br>
		
						<address>Bill Brown wbrown@unm.edu</address>
		
							<p id="b"><a href="http://billbrown2013.github.io/maya-isotopes-project-2013/githubcaries.html">Top</a></p>		
	</body>
</html>


